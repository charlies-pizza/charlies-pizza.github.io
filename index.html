<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="Charlie's Pizza Kristiansand, online pizza bestilling nettsted. Rask og enkel online pizza bestilling med hjemlevering eller henting.">
<meta name="keywords" content="Charlie's Pizza, Kristiansand, online pizza bestilling, online pizza, pizza levering, pizza henting">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Charlie's Pizza Kristiansand - Online Pizza Bestilling</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css">
<style>
  /* Temel stil sıfırlama */
  * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
/* Düzenle: */
body {
  font-family: 'Arial', sans-serif;
  background-color: #f5f5f5;
  padding-top: 0; /* Sabit başlık yüksekliğine göre ayarlayın */
}
.card {
  width: 100vw; /* ekran genişliğine göre ayarlanır */
  margin: 0;
  margin-top: 0;
  padding: 5px;

}

@keyframes blink {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.8;
  }
}

.glf-button {
  animation: blink 0.9s linear infinite;
}

.glf-button {
  position: fixed;
  top: -2px;
  left: -2px;
  width: 100%;
  height: 65px;
  z-index: 100;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
  font-size: 24px;
  color: #ffffff;
}

hr {
  margin: 20px 0;
  border: none;
  border-top: 1px solid #e5e5e5;
}

.title {
  font-size: 18px;
  font-weight: bold;
  color: #333;
  text-align: center;
  margin-bottom: 20px;
}
.stamps {
    display: flex;
    margin-bottom: 20px;
    min-width: auto;
    margin-left: auto;
    margin-right: auto;
    flex-wrap: wrap;
    justify-content: space-around;
}

.stamp {
  width: 50px;
  height: 50px;
  background-color: #e5e5e5;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #333;
  font-weight: bold;
  font-size: 20px;
  margin: 5px;
  border-radius: 50%;
  border: 2px solid #33333358;
  box-shadow: 0 8px 6px rgba(0, 0, 0, 0.614);
}

.stamp.complete {
  background-color: #4caf50;
  color: #ffffff;
}

.stamp i {
  margin-left: 5px;
}

.qr-code {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 20px;
  border:2px solid #767e76;
  padding: 10px;
 }


input {
  outline: none;
  text-align: center;
  width: 85vw;
  height: 50px;
  font-size: 20px;
  background-color: #f5f5f5;
  border: 1px solid #e5e5e5;
  border-radius: 10px;
  margin-top: 10px;
}

input::placeholder {
  color: #ffffff;
}

@media (min-width: 350px) {
    .stamp {
      width: 60px;
      height: 60px;
    }
.card {
  width: 350px; /* ekran genişliğine göre ayarlanır */
  margin: auto;
}
input {
  width: 340px; /* ekran genişliğine göre ayarlanır */
  height: 50px;
}
  }
  @media (min-width: 700px) {
.card {
  width: 800px; /* ekran genişliğine göre ayarlanır */
  margin: auto;
  background-color: #fffffff6;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.614);
}
input {
  width: 50%; /* ekran genişliğine göre ayarlanır */
  height: 50px;
}
  }
  .profil {
  position: fixed;
  top: 2px;
  left: 45px;
  transform: translateX(-50%);
  z-index: 100;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 60px;
  height: 60px;
}

.profil img {
  width: 100%;
  height: 100%;
  border-radius: 50%;
}
.stamp.gratis {
  background-color: #b9f7c4d7;
  border: 2px solid #1c173ac5;
  border-radius: 15%;
  width: 135px;

  font-size: 16px;
}
table {
  width: 100%;
  margin: 0 auto;
  text-align: center;
}

th {
  font-size: 16px;
}

td, th {
  padding: 2px;
  font-size: 12px;
}
#kupon{
  border: 4px dashed rgba(6, 6, 6, 0.655);
  padding: 10px;
  background-color: #ffffff;
  box-shadow: 0 12px 8px rgba(0, 0, 0, 0.614);
}
.iconlar{
    display: flex;
    font-size: 35px;
    align-content: space-around;
    justify-content: space-around;
    flex-wrap: wrap;
    flex-direction: row-reverse;
    font-size: 35px;
    color: #6b95f1;
}
</style>
</head>
<body>
  
<div class="card">
  <a href="https://bestill.online/takeaway.html">
    <span class="glf-button" style="background-color: #ff7300;">
              Se MENY og Bestill 👆
    </span>
</a>

<div class="profil">
<img src="https://i.hizliresim.com/51zdn92.png" alt="">
</div>
<br><br><br><br><br>
<h1 class="title">Digitalt StempelKort</h1>

<div id="kupon" class="stamps">   </div>
<h5 id="register" style="text-align: center;"></h5>
<h1 class="title"><span id="completed"><input id="inp" type="text" pattern="\d{8}" maxlength="8" inputmode="numeric" placeholder="Registrer ditt mobilnummer 📱" onkeyup="method()" oninput="this.value = this.value.replace(/[^0-9]/g, ''); updateInputBackground();">
</span>
</h1>
<h5 style="text-align: center;">For å samle kuponger, vis frem QR-koden din når du henter en stor pizza.</h5>
<div class="qr-code">
  <div id="QRimage"></div>
  </div>

  <p style="text-align: center; font-size:13px;">
    Spar penger på stor pizza! Registrer nummeret ditt,<br> vis QR-koden for hver stor pizza du henter <br>og få en kupong per pizza. 
    <br><br>Etter å ha samlet 10 kuponger på din 11. pizza, <br>får du en gratis stor pizza.  <br>Tilbudet gjelder bare for store pizzaer.

  </p>
  <hr>
  <table>
    <tr>
      <td>
        <h3>🕒 Åpningstider</h3>
        <p style="font-size: 14px;">Mandag er stengt<br>Resten: 14:00 - 22:00</p>
        <hr>
       </td>

      <td>
        <h3>💰 Betalingsmetode</h3>
        <p style="font-size: 14px;">- Vipps / Kort / kontant <br>- Web Online Betaling</p>
        <hr>
         </td>
    </tr>
  </table>
  <br>
  <h2 class="iconlar">
    <a href="https://m.me/charlies.pizza.krs" target="_blank"></a><i class="fab fa-facebook-messenger"></i></a>
    <a href="https://www.facebook.com/charlies.pizza.krs" target="_blank"><i class="fab fa-facebook"></i></a>
    <a href="tel:95529999"><i class="fas fa-phone"></i></a>
    <a href="https://www.google.com/maps/search/maps/@58.1590178,7.9413902,13z/data=!3m1!4b1" target="_blank"><i class="fas fa-map-marked-alt"></i></a>
  </h2>
  <br>
</div>

</div>
<table id="demo">   </table>
<script src="https://www.fbgcdn.com/embedder/js/ewm2.js" defer async ></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
   import { getDatabase, ref, onValue, set, remove, update } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-database.js";
   const firebaseConfig = { databaseURL: "https://charlies-pizza-default-rtdb.europe-west1.firebasedatabase.app",
        };
  
   // Firebase yapılandırmasını başlat
   initializeApp(firebaseConfig);
   const database = getDatabase();
   const commentsReference = ref(database);

         guncelle();
function guncelle() {

  function createStamps(numActive) {

  kupon.innerHTML = null;
  for (let index = 1; index <= 11; index++) {
    if (index <= numActive) {
      kupon.innerHTML += `<div class="stamp complete"> ${index} <i class="fas fa-check"></i></div>`;
    } else if (index == 11) {
      kupon.innerHTML += `<div class="stamp gratis">11. Pizza Gratis</div>`;
    } else {
      kupon.innerHTML += `<div class="stamp"> ${index} </div>`;
    }
  }
  if (numActive == 10) {
      kupon.innerHTML = `<h2 style="text-align:center; padding: 10px;">Gratulerer! 🎉 </h2><h4 style="text-align:center; padding: 20px;">11. pizza din er gratis 🍕!<br> God appetitt! 😊<br></h4> <h5 style="margin-bottom: 20px;text-align:center;color:red;">Vis QR-koden din til de ansatte for å få den gratis pizzaen.</h5>`;
    }
}

onValue(commentsReference, (snapshot) => {
  demo.innerHTML = "";
  kupon.innerHTML = null;

  const jsonString = JSON.stringify(snapshot);
  const parsedObject = JSON.parse(jsonString);

  let foundMatch = false;

  for (const key in parsedObject) {
    
    if (key == localStorage.getItem('mobilNumara')) {
      createStamps(parsedObject[key]); // Eşleşme bulunduğunda aktif kuponları oluştur
      foundMatch = true;
      break;
    }
  }

  if (!foundMatch) {
    createStamps(0); // Eşleşme bulunamadığında pasif kuponları oluştur
  }
});
}

window.guncelle = guncelle;
</script>
  

<script>
function updateInputBackground() {
  var inp = document.getElementById("inp");
  if (inp.value.length === 8) {
    inp.style.backgroundColor = "#14cb1a76"; // 8 haneli numara için yeşil arka plan
    register.innerHTML = `Nummeret ditt er registrert! ✔️`;
  } else {
    inp.style.backgroundColor = "#ee070792"; // 8'den az haneli numara için kırmızı arka plan
    register.innerHTML = `Registrer nummeret ditt for å samle kuponger.`;
  }
}

inp.value = localStorage.getItem('mobilNumara');

  method();
  function method() {

    // Numara tam 8 girilince yesil, eksikse kirmizi
    updateInputBackground();
    
    var QRimage = document.getElementById("QRimage");
    var inp = document.getElementById("inp");

    // localStorage'ye girilen numarayı kaydedin
    localStorage.setItem('mobilNumara', inp.value);

    QRimage.innerHTML = null;
    var QR = new QRCode(QRimage);
    QR.makeCode("https://bestill.online/kayit.html?n="+inp.value);

    guncelle(); 
  }
</script>

</body>
</html>
