<!DOCTYPE html>
<html lang="nb">
<head>
<meta charset="UTF-8">
<title>Charlie's Pizza Kristiansand - Online Pizza Bestilling</title>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="keywords" content="Pizza, online bestilling, Charlie's Pizza, Kristiansand, takeaway, levering, Italiensk pizza" />
<meta name="description" content="Pizza til folket! Bestill pizza fra Charlie's Pizza. Ferske bunner hver dag. Takeaway og levering. Charlie's Pizza Kristiansand, online pizza bestilling nettsted. Ekte pizza med 100% italienske ingredienser, stekt i profesjonell stein-ovn." />
<link rel="icon" type="image/png" href="https://bestill.online/img/icon-s.png">
<script src="https://bestill.online/con.js"></script>

<style>
body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    margin: 0;
    padding: 0;
    background: linear-gradient(-60deg, #3b5998, #8b9dc3);
    font-family: Arial, sans-serif;
}

.standart{
    max-width:90%;
    width:370px;
    border-radius:10px;
    margin:10px;
    background-color: #ffffff;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
}

#mobilnr {
    box-sizing: border-box;
    border: 2px solid #555;
    border-radius: 4px;
    background-color: #f8f8f8;
    font-size: 18px;
    transition: 0.3s;
    text-align:center;
    letter-spacing: 7px;
    padding:10px;
}

#mobilnr:focus {
    border-color: #3b5998;
    outline: none;
    box-shadow: 0 0 5px #3b5998;
}

#kupon{
    display: flex;
    background-color: #f7f7f7;
    justify-content: center;
    align-items: center;
    height:auto;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
}

span.aktiv, span.pasif {
    width: 3em;
    height: 3em;
    margin: 5px;
    border-radius: 50%;
    color: #ffffff;
    background-color: #3b5998;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1.3px dashed #555;
    font-size: 1.2em;
}

span.pasif { 
    background-color: #dfe3ee;
    color: #3b5998;
}

.kemer {
    width: 100%;
    height: 50px;
    color: white;
    background-color: #3b5998;
    display:flex;
    align-items: center;
    justify-content: space-evenly;
    font-size: 22px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
}

#register{
    text-align:center;
    background-color:#f7f7f7;
    margin:-0px -0px -10px -0px;
    padding:5px 0px 5px 0px;
    border-radius:0;
    max-width:90%;
    width:366px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
}

</style>
</head>

<body>

<div class="kemer" id="saat"> <span id="hours"> *** </span> </div>

<img class="standart" onclick="toggleCentered('F')" src="https://bestill.online/img/mavili.gif?raw=true">

<div class="standart" id="register"> Vennligst registrer nummeret ditt her! </div>

<input class="standart" type="text" oninput="INPUT(this.value);" id="mobilnr" placeholder="00000000" maxlength="8">

<div class="standart" id="kupon">
  <!-- Content here -->
</div>
<img class="standart" id="QRCODE">

<script type="module">

    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-database.js";
    const firebaseConfig = { databaseURL: "https://bestill-pizza-default-rtdb.europe-west1.firebasedatabase.app" };

    initializeApp(firebaseConfig);
    const database = getDatabase();

	mobilnr.value = localStorage.getItem('MOBIL');
	INPUT(mobilnr.value);
    
    function guncelle() {
    
	localStorage.setItem('MOBIL', mobilnr.value);
    let specificKey = localStorage.getItem('MOBIL') || '0';
    
    QRCODE.src = `https://chart.googleapis.com/chart?cht=qr&chl=bestill.online/kayit.html?n=${encodeURIComponent(specificKey)}&chs=400x400&chld=L|0`;

	const specificKeyReference = ref(database, specificKey);

	onValue(specificKeyReference, (snapshot) => {
    kupon.innerHTML = null;
    const value = snapshot.val();

    for (let index = 1; index <= 5; index++) {
	kupon.innerHTML += `${index <= value ? '<span class="aktiv">'+ index +'</span>' : '<span class="pasif">'+ index +'</span>'}`;
	}

	});
    }
    
	mobilnr.addEventListener("input", guncelle);
	window.addEventListener("load", guncelle);
</script>

<script>
function INPUT(inp) {
    const firstDigit = parseInt(inp[0]);
    const invalidStartDigits = [0, 1, 2, 3, 5, 6, 7, 8];

    if (invalidStartDigits.includes(firstDigit)) {
        register.innerHTML = `❌ Nr må begynne med 4 og 9.`;
    } else if (inp.length === 8 && !invalidStartDigits.includes(firstDigit)) {
        register.innerHTML = `✅ Nummeret ditt er registrert.`;
    } else {
        register.innerHTML = `Vennligst registrer nummeret ditt her!`;
    }
}
  
function updateStatus() {
  const currentDate = new Date();
  const dayOfWeek = currentDate.getDay();
  const currentHour = currentDate.getHours();

  let themeColor = document.querySelector('meta[name="theme-color"]');

  if (!themeColor) {
    themeColor = document.createElement("meta");
    themeColor.name = "theme-color";
    document.head.appendChild(themeColor);
  }

  if (dayOfWeek === 1) { // Mandag
    hours.textContent = `🚫 Charlie's Pizza er stengt på mandager.`;
    saat.style ="background-color: #ef4e4b;font-size: 17px;"
    themeColor.content = "#ef4e4b";
    
  } else if (currentHour >= 14 && currentHour < 22) {
    hours.innerText  = `🟢 Åpent i dag fra kl. 14:00 til 22:00`;
    saat.style ="background-color: #5ac15e;font-size: 17px;"
    themeColor.content = "#5ac15e";

  } else {
    hours.innerText  = `🔴 Charlie's Pizza er stengt nå.`;
    saat.style ="background-color: #ef4e4b;font-size: 17px;"
    themeColor.content = "#ef4e4b";
  }
}
updateStatus();
</script>


</body>
</html>
